<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.edu.xmut.learningplatform.mapper.courseMapper">

    <select id="getAllCourse" resultType="course">
        SELECT * FROM course
        WHERE 1 = 1
        <if test="id != null">
            AND id = #{id}
        </if>
        <if test="name != null and name != ''">
            AND name = #{name}
        </if>
        <if test="startTime != null">
            AND startTime <![CDATA[ >= ]]> #{startTime}
        </if>
        <if test="endTime != null">
            AND endTime <![CDATA[ <= ]]> #{endTime}
        </if>
    </select>

    <select id="getTeacherAllCourse" resultType="course">
        SELECT * FROM course
        WHERE 1 = 1
        <if test="id != null">
            AND id = #{id}
        </if>
        <if test="name != null and name != ''">
            AND name = #{name}
        </if>
        <if test="startTime != null">
            AND startTime <![CDATA[ >= ]]> #{startTime}
        </if>
        <if test="endTime != null">
            AND endTime <![CDATA[ <= ]]> #{endTime}
        </if>
        AND userId = #{userId}
    </select>


    <insert id="addCourse" useGeneratedKeys="true" keyProperty="id" parameterType="course">
        INSERT INTO `course` (
            `name`, `cover`, `startTime`, `endTime`, `description`, `userId`,`courseCode`,`className`
        ) VALUES (
                     #{name}, #{cover}, #{startTime}, #{endTime}, #{description}, #{userId},#{courseCode},#{className}
                 )
    </insert>


    <select id="getCourseByCourseId" resultType="course">
        SELECT * FROM course WHERE id = #{courseId}
    </select>
</mapper>